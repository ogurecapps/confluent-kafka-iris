# Apache Kafka adapters for the InterSystems IRIS Data Platform
If you have seen the default platform adapters for Kafka in the package `EnsLib.Kafka.*` you might have noticed that this implementation looks like a proof of concept. They do not support partitions, guaranteed delivery, do not translate Java errors to the IRIS level, and so on. Disclaimer: Checked on the platform version 2025.1. It might be fixed in the next versions.

It is a try to make more production-ready connectors for Apache Kafka based on the confluent-kafka-python library. Of course, it is not a universal solution. I decided that making connectors, considering all possible cases, would make the settings of adapters overcomplicated. So it is a base, which you can feel free to fork and improve according to your requirements.

This project is backward-compatible with the default implementation. It means the same settings for both adapters, so you can just change the class in Production. If you are already using `EnsLib.Kafka.Service` - change class to `Kafka.Service.Consumer`, and for `EnsLib.Kafka.Operation` change to `Kafka.Operation.Producer`.

You can use the common settings storage for adapters through the [Lookup Tables](https://docs.intersystems.com/irislatest/csp/docbook/DocBook.UI.Page.cls?KEY=ECONFIG_lookup_tables) mechanism. Both adapters have a setting called `ConfigLookupTable`, which specifies the name of the table containing the parameter key-values. Therefore, you can utilize all configuration parameters available in the official documentation (for both [consumers](https://docs.confluent.io/platform/current/installation/configuration/consumer-configs.html) and [producers](https://docs.confluent.io/platform/current/installation/configuration/producer-configs.html)). Keep in mind, some of these may require changes to the code. Additionally, it helps avoid repeating all settings in each service or operation when reading or writing different partitions, for example.

The inbound adapter implements guaranteed delivery (see the checkbox `AtLeastOnce`). When enabled, IRIS will update the message offset in Kafka only after receiving a non-failure response from the target Business Host(s). It means repeatedly pulling the same Kafka message until the message is successfully processed.